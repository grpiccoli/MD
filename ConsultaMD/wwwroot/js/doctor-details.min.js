function initDetails(){function v(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(i){var r=n.getBounds(),u=new google.maps.LatLng(i.coords.latitude,i.coords.longitude);f=new google.maps.Marker({position:u,map:n,title:"Mi posición actual",icon:"https://chart.apis.google.com/chart?chst=d_map_xpin_icon&chld=pin_star|wc-male|042037|2A4F6E"});t.push(f);r.extend(u);n.fitBounds(r)})}function y(){for(var f,r=new google.maps.LatLngBounds,i=0,u=t;i<u.length;i++)f=u[i],r.extend(f.getPosition());n.fitBounds(r)}function p(t,u){google.maps.event.addListener(t,"click",function(){i.setContent(r[u]);i.open(n,t)})}function w(i,u){i.place_id in r||(r[i.place_id]='<div class="col s12 m6"><div class="card small"><div class="card-image">'+('<img class="placeimg" src="'+i.photos[0].getUrl({maxWidth:200})+'">')+('<span class="card-title"><b>'+i.name+"<\/b><\/span>")+'<\/div><div class="card-action">'+("<p><b>Dirección<\/b>: "+i.formatted_address+'.<a href="'+i.url+'"><i class="material-icons">location_on<\/i><\/a><\/p>')+"<\/div><\/div><\/div>");var f=new google.maps.Marker({position:i.geometry.location,map:n,title:i.name+"\n"+i.formatted_address,icon:{url:"https://chart.apis.google.com/chart?chst=d_map_spin&chld=1|0|1d999e|16|b|",labelOrigin:new google.maps.Point(20,75)},label:{text:i.name,fontSize:"1.2rem",fontWeight:"800"},opacity:1,place:{placeId:i.place_id,location:i.geometry.location}});f.setVisible(u);p(f,i.place_id);t.push(f);u&&n.panTo(f.getPosition())}function o(n){for(var r,e=u[n][0],t="<ul>",i=0,f=e;i<f.length;i++)r=f[i],t+='<li><a class="btn tooltipped" data-tooltip="'+r+'"><img src="/img/mi/'+r+'-icon.min.png"/><\/a><\/li>';t+="<\/ul>";$("#insuranceList").html(t);M.Tooltip.init(document.querySelectorAll(".tooltipped"))}var r={},u,t=[],n=new google.maps.Map(document.getElementById("map"),{mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,fullscreenControl:!1,zoom:18,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER}}),f,i,e,s,h,c,l,a;$("#toggle-center").click(function(){var n=this.firstElementChild;n.innerHTML=="location_off"?(n.innerHTML="location_on",v()):(n.innerHTML="location_off",t.pop(),f.setMap(null),y())});i=new google.maps.InfoWindow;e=new google.maps.places.PlacesService(n);s=$("#sidenav-details").detach();$("#nav-mobile").html(s[0]);M.FormSelect.init(document.querySelectorAll("select"));h="dddd dd mmmm, yyyy";c=new Date;M.Datepicker.init(document.getElementById("Date"),{firstDay:1,format:h,autoClose:!0,minDate:c,maxDate:new Date($("#Last").val()),disableDayFn:function(n){var t=$("#MdId").val(),i=moment(n,moment.ISO_8601).format("YYYYMMDD");return u[t][1].indexOf(i)===-1},container:document.querySelector("body"),i18n:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Set","Oct","Nov","Dic"],weekdays:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysAbbrev:["D","L","M","M","J","V","S"],cancel:"Cancelar",clear:"Limpiar",done:"Ok"},showClearBtn:!0,onSelect:function(n){var t=moment(n,moment.ISO_8601).toJSON().replace("Z","");$.post("/Patients/Search/TimeSlots",{__RequestVerificationToken:$("input[name='__RequestVerificationToken']").val(),startDate:t,mdId:$("#MdId").val()},function(n){var t="",i="";$.each(n,function(n,r){var u="<tr>"+("<td>"+r.startTime+"<\/td>")+"<td>"+('<button class="time-select btn clinic-desc" data-id="'+r.id+'" class="btn waves-effect waves-teal right-align">SELECCIONAR<\/button>')+"<\/td><\/tr>";~r.startTime.indexOf("a.")?t+=u:i+=u});l="<table>"+t+"<\/table>";$("#BookingMorning").html(l);a="<table>"+i+"<\/table>";$("#BookingAfternoon").html(a);$("#map-view").slideUp();$("#date-view").slideDown()})}});$("#date-view").on("click","button.time-select",function(){$("#TimeSlotId").val($(this).data("id"));$("#BookForm").submit()});$.post("/Patients/Search/MdData",{__RequestVerificationToken:$("input[name='__RequestVerificationToken']").val(),id:$("#DocVM_Id").val()},function(n){u=n;var t=$("#MdId").val();o(t);$("#MdId").change(function(){o($(this).val())})});$("#PlaceId > option").each(function(n,t){var i=$("#MdId option:selected").val();e.getDetails({placeId:$(t).text(),fields:["name","formatted_address","place_id","geometry","photo","icon","address_components"]},function(n){w(n,$(t).val()==i);setTimeout(function(){$("select").formSelect()},100)})});$("#MdId").on("change",function(){$("#map-view").slideDown();$("#date-view").slideUp();$("#Date").val("Seleccionar Fecha y Hora");var r=$(this).val();t.forEach(function(t){var f=$("#PlaceId option[value='"+r+"']").text(),u=t.get("place").placeId===f;i.close();t.setVisible(u);u&&n.panTo(t.getPosition());M.Tooltip.init(document.querySelectorAll(".tooltipped"))})})}