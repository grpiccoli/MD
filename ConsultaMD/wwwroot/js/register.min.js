document.addEventListener("DOMContentLoaded",function(){var u="Input_CarnetId",t=$("#Input_RUT"),n=$("#Input_Name"),i=$("#"+u),o=$("#Input_Email"),r=7,f=n.parent(),e=i.parent();new Cleave("#"+u,{delimiter:".",blocks:[3,3,3],uppercase:!0});Parsley.addValidator("rut",{validateString:function(u){t.val(u.replace(/k/,"K"));var o,s,h=$.validateRut(u,function(n,t){o=n;s=t},{minimumLength:r});return!h||o>3e7?!1:(loaderStart(),fetch("/SP/validaterut",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),body:"__RequestVerificationToken="+$('input[name="__RequestVerificationToken"]').val()+("&rut="+o)+("&dv="+s.replace(/k/,"K"))}).then(function(n){return n.json()}).then(function(r){return n.val(r.value),n.addClass("valid"),M.updateTextFields(),f.slideDown(),e.slideDown(),i.focus(),M.toast({html:"RUT válido",classes:"rounded"}),t.parsley().reset(),!0}).catch(function(n){throw n;}).finally(loaderStop))},messages:{es:"RUT inválido"}});Parsley.addValidator("carnet",{validateString:function(n){var f=t.val(),u,e,s,h;return f?(s=$.validateRut(f,function(n,t){u=n;e=t},{minimumLength:r}),!s||u>3e7)?!1:(loaderStart(),h=$("#IsExt").prop("checked"),fetch("/SP/DocumentRequestStatus",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),body:"__RequestVerificationToken="+$('input[name="__RequestVerificationToken"]').val()+("&rut="+u)+("&dv="+e.replace(/k/,"K"))+("&carnet="+n.replace(/\./g,""))+("&isExt="+h)}).then(function(n){return n.text()}).then(function(n){return console.log(n),M.updateTextFields(),o.focus(),M.toast({html:"Cédula válida",classes:"rounded"}),i.parsley().reset(),!0}).catch(function(n){throw n;}).finally(loaderStop)):!1},messages:{es:"Verfique combinación RUT/Carnet"}});t.keyup(function(){f.slideUp();e.slideUp();n.prop("readonly",!0);i.val("");n.val("")}).rut({formatOn:"keyup change",minimumLength:r,validateOn:"change"});M.Collapsible.init(document.querySelectorAll(".collapsible"))});